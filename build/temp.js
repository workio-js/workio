const[src,port]=await new Promise(a=>globalThis.onmessage=({data:{src:s,port:e}})=>{delete globalThis.onmessage,a([s,e])});let methods,TYPEOF_EXPORT,IS_DEFAULT;port.onmessage=async({data:{type:a,body:s,uuid:e}})=>{switch(a){case"init":{methods=await import(src),IS_DEFAULT=Object.keys(methods).length==1&&"default"in methods,globalThis.postMessage({type:"init",body:{exportType:TYPEOF_EXPORT,IS_DEFAULT},uuid:e});break}case"call":{const{method:t,args:o}=s;port.postMessage({type:"return",body:await methods[IS_DEFAULT?"default":t]?.apply?.(null,o),uuid:e});break}}};
